---
title: v8垃圾回收机制
date: 2022-05-06 20:04:49
tags: 垃圾回收
categories: 面试
---

#### 垃圾回收机制

1. 引用计数法

```js
//缺点
function fn(){
    const obj1 = {}
    const obj2 = {}
    obj1.a = obj2
    obj2.a = obj1
}
fn()
//二者互相引用,引用数为1
```

2. 标记法(可达性)

```js
//根据window或者global向下搜索,搜索到了就是标记,未搜索到就不标记(通过一个二进制字符来标记,进入环境离开环境)

//缺点:清除之后剩余对象的相对位置是不变的,内存不连续
```



#### v8垃圾回收的算法(算法)

> 分布式垃圾回收机制:新生代,老生代;两个垃圾回收器

* 新生代垃圾回收:两个区域:使用区和空闲区; 使用区快满的时候进行一次垃圾回收,还在使用的复制到空闲区,不使用的直接清理,使用区和回收区互换,如果一个对象多次复制还是未被清理则把他放入老生代
* 老生代垃圾回收:这些对象占用内存大,不适合回收,所以直接进行标记清除









































































































